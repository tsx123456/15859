System.register("chunks:///_virtual/Fruit77",["./Fruit77GameBtn.ts","./Fruit77MainView.ts","./FruitSelfRecord.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Fruit77GameBtn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GUtil.ts","./ViewManager.ts","./Common.ts","./Fruit77Def.ts","./Fruit77Model.ts","./EventManager.ts","./I18n.ts","./GameDef.ts","./onBtnPress.ts","./LocalizedImage.ts","./Fruit77Utils.ts","./Fruit77Ctrl.ts"],(function(n){var t,e,i,o,a,u,s,r,c,l,f,d,B,p,g,b,h,m,R,_,y,S,v,A,F,k,w,C;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized,a=n.createForOfIteratorHelperLoose},function(n){u=n.cclegacy,s=n._decorator,r=n.Node,c=n.Button,l=n.find,f=n.sp,d=n.assetManager,B=n.Texture2D,p=n.instantiate,g=n.Component},function(n){b=n.default},function(n){h=n.default},function(n){m=n.Common},function(n){R=n.eSound,_=n.eEvent},function(n){y=n.Fruit77Model},function(n){S=n.default},function(n){v=n.default},function(n){A=n.GameDef},function(n){F=n.default},function(n){k=n.LocalizedImage},function(n){w=n.Fruit77Utils},function(n){C=n.Fruit77Ctrl}],execute:function(){var L,T,G,I,x,P,D,z,M,E,U,H;u._RF.push({},"4c9c6fGvjJPz45sB+GbGUOQ","Fruit77GameBtn",void 0);var O=s.ccclass,q=s.property,V=s.menu;n("default",(L=O("Fruit77GameBtn"),T=V("game/Fruit77/Fruit77GameBtn"),G=q(r),I=q(c),x=q(c),P=q(F),L(D=T((M=t((z=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),u=0;u<e;u++)a[u]=arguments[u];return t=n.call.apply(n,[this].concat(a))||this,i(t,"Layout_bet",M,o(t)),i(t,"Button_autoRun",E,o(t)),i(t,"Button_run",U,o(t)),i(t,"onBtnAllPress",H,o(t)),t}e(t,n);var u=t.prototype;return u.onEnable=function(){for(var n,t=this,e=a(this.Layout_bet.children);!(n=e()).done;){n.value.on(r.EventType.TOUCH_START,this.onBtnBet,this)}this.onBtnAllPress.onSwitch=function(n){l("Background/text",t.onBtnAllPress.node).getComponent(k).key=n?"btn_all2":"btn_all1"}},u.onDisable=function(){for(var n,t=a(this.Layout_bet.children);!(n=t()).done;){n.value.off("click",this.onBtnBet,this)}this.onBtnAllPress.onSwitch=null},u.start=function(){var n=l("Background",this.Button_run.node).getComponent(f.Skeleton),t=d.getBundle(A.GameMap[A.GameType.slotFruit]),e=t.get("language/"+v.getLangType()+"/spin/texture",B);n.setSlotTexture("tittle",e),n=l("Background",this.Button_autoRun.node).getComponent(f.Skeleton),e=t.get("language/"+v.getLangType()+"/auto/texture",B),n.setSlotTexture("tittle",e)},u.btnDelayEnable=function(n){var t=l("Background",n.node).getComponent(f.Skeleton);t.setAnimation(0,"quay",!1),n.interactable=!1,this.scheduleOnce((function(){y.instance.isRuning||(n.interactable=!0,t.setAnimation(0,"idle",!1))}),2)},u.onBtnStartRun=function(){0!=y.instance.totalBet?y.instance.isRuning?m.showTip(v.lang[10010]):(this.btnDelayEnable(this.Button_run),C.instance.reqBet()):m.showTip(v.lang[10011])},u.onBtnAutoRun=function(){if(0==y.instance.totalBet)return m.showTip(v.lang[10011]),void this.autoBtnCheck(!1);y.instance.isRuning||y.instance.isAutoRun||(this.Button_run.interactable=!1,C.instance.reqBet()),y.instance.isAutoRun=!y.instance.isAutoRun,this.autoBtnCheck(y.instance.isAutoRun)},u.autoBtnCheck=function(n){var t=l("Background",this.Button_autoRun.node).getComponent(f.Skeleton);n?t.setAnimation(0,"life",!0):t.setAnimation(0,"idle",!0),y.instance.isRuning||y.instance.isAutoRun||(this.Button_run.interactable=!0)},u.onBtnBet=function(n){if(y.instance.isRuning)m.showTip(v.lang[10010]);else{var t=null,e=n.target.name;switch(e){case"Button_all":for(var i=0;i<8;i++)y.instance.betList[i]++,y.instance.betList[i]>99&&(y.instance.betList[i]=99);w.instance.playSound(R.run_2);break;default:t=parseInt(e.replace("Button_","")),y.instance.betList[t]++,y.instance.betList[t]>99&&(y.instance.betList[t]=99),w.instance.playSound(R["run_"+t%5])}S.instance.emit(_.update_betInfo,t)}},u.onBtnClearBet=function(){y.instance.isRuning?m.showTip(v.lang[10010]):(y.instance.clearBet(),this.autoBtnCheck(!1),S.instance.emit(_.update_betInfo),y.instance.isAutoRun&&(y.instance.isAutoRun=!1,this.Button_run.interactable=!0))},u.onBtnBaseScoreAdd=function(){y.instance.isRuning?m.showTip(v.lang[10010]):(y.instance.baseScoreIndex++,y.instance.baseScoreIndex>=y.instance.baseScoreCFG.length&&(y.instance.baseScoreIndex=0),S.instance.emit(_.update_baseScore))},u.onBtnBaseScoreRedus=function(){y.instance.isRuning?m.showTip(v.lang[10010]):(y.instance.baseScoreIndex--,y.instance.baseScoreIndex<0&&(y.instance.baseScoreIndex=y.instance.baseScoreCFG.length-1),S.instance.emit(_.update_baseScore))},u.onBtnRule=function(){m.showLog("显示游戏规则"),m.loadPopBuddle("prefab/Help",w.instance.bundle,(function(){}),(function(n){var t=p(n);h.instance.popNodeView(t,!0)}),!0)},u.onBtnPath=function(){},u.onBtnRank=function(){b.openRank("slotFruit")},u.onBtnRecord=function(){b.openRecord("slotFruit")},u.onBtnGameRecord=function(){w.instance.loadPopView("selfRecord")},t}(g)).prototype,"Layout_bet",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(z.prototype,"Button_autoRun",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(z.prototype,"Button_run",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(z.prototype,"onBtnAllPress",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=z))||D)||D));u._RF.pop()}}}));

System.register("chunks:///_virtual/Fruit77MainView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDef.ts","./Fruit77Def.ts","./EventManager.ts","./NetManager.ts","./ConfigManager.ts","./DataManager.ts","./Common.ts","./I18n.ts","./Fruit77Ctrl.ts","./Fruit77Model.ts","./Fruit77Utils.ts","./AudioManager.ts","./GameButtonDef.ts"],(function(t){var e,i,n,s,o,r,a,h,l,c,u,d,p,g,m,_,f,y,b,T,L,v,w,C,N,S,P,B,R,D,A,F,G,x,I,M,k,E,z,O,H,U,K,V,q;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose,n=t.applyDecoratedDescriptor,s=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,h=t.Node,l=t.Label,c=t.Button,u=t.sp,d=t.assetManager,p=t.Texture2D,g=t.v3,m=t.instantiate,_=t.Tween,f=t.UIOpacity,y=t.Sprite,b=t.tween},function(t){T=t.GameDef},function(t){L=t.eEvent,v=t.eProto,w=t.arrLightPos,C=t.eSound,N=t.maxRecords,S=t.eRunType,P=t.eRewardType,B=t.nomalStarDelay,R=t.nomalSpeed,D=t.addSpeed,A=t.redusTimes,F=t.redusSpeed},function(t){G=t.default},function(t){x=t.default},function(t){I=t.default},function(t){M=t.default,k=t.UserProxyEvent,E=t.UserKey},function(t){z=t.Common},function(t){O=t.default},function(t){H=t.Fruit77Ctrl},function(t){U=t.Fruit77Model},function(t){K=t.Fruit77Utils},function(t){V=t.default},function(t){q=t.GameButtonMap}],execute:function(){var W,J,j,Z,Q,X,Y,$,tt,et,it,nt,st,ot,rt,at,ht,lt,ct,ut,dt,pt,gt,mt,_t,ft,yt,bt,Tt,Lt,vt,wt;r._RF.push({},"4e968gr+oNK5bMF50rPIomi","Fruit77MainView",void 0);var Ct=a.ccclass,Nt=a.property,St=a.menu;t("default",(W=Ct("Fruit77MainView"),J=St("game/Fruit77/Fruit77MainView"),j=Nt(h),Z=Nt(h),Q=Nt(h),X=Nt(h),Y=Nt(l),$=Nt(l),tt=Nt(l),et=Nt(l),it=Nt(h),nt=Nt(h),st=Nt(h),ot=Nt(c),rt=Nt(u.Skeleton),at=Nt(u.Skeleton),W(ht=J((lt=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,s(e,"Node_record",ct,o(e)),s(e,"Node_itemTemp",ut,o(e)),s(e,"NodeLight",dt,o(e)),s(e,"Sprite_light",pt,o(e)),s(e,"Label_totalBet",gt,o(e)),s(e,"Label_baseScore",mt,o(e)),s(e,"Label_IssueNo",_t,o(e)),s(e,"Label_gold",ft,o(e)),s(e,"Node_betInfo",yt,o(e)),s(e,"Sprite_light_bonus",bt,o(e)),s(e,"Node_winTip",Tt,o(e)),s(e,"Button_run",Lt,o(e)),s(e,"Node_bonusTip",vt,o(e)),s(e,"Node_centerEffect",wt,o(e)),e.runType=S.NONE,e.endPos=0,e.dtTimes=0,e.curDelayTimes=0,e.totalTimes=0,e._curLightPos=0,e.rewardIndex=0,e}e(n,t);var r=n.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this,H.instance),z.updateProgress(1);for(var e=this.Node_betInfo.children,i=0;i<8;i++)e[i].getComponent(l).string="00";this.onClickHTMLStartBtn=this.onClickHTMLStartBtn.bind(this),window.addEventListener("customEventFromHTML",this.onClickHTMLStartBtn)},r.onClickHTMLStartBtn=function(){this.initGame()},r.start=function(){var t=d.getBundle(T.GameMap[T.GameType.slotFruit]).get("language/"+O.getLangType()+"/fruit/texture",p);this.Node_centerEffect.setSlotTexture("fruitanme",t)},r.disConnect=function(){z.showWait()},r.onConnect=function(){z.closeWait(),U.instance.isWaitBet&&H.instance.reqBet()},r.onEnable=function(){t.prototype.onEnable.call(this),G.instance.on(L.update_baseScore,this.onEvent_updateBaseScore,this),G.instance.on(L.update_betInfo,this.onEvent_updateBetInfo,this),M.instance.on(k.CHANGE_GOLD,this.setGold,this),G.instance.on(I.instance.eventTransform.disConnect,this.disConnect,this),G.instance.on(I.instance.protocolHall.login,this.onConnect,this)},r.onDisable=function(){t.prototype.onDisable.call(this),G.instance.off(L.update_baseScore,this.onEvent_updateBaseScore,this),G.instance.off(L.update_betInfo,this.onEvent_updateBetInfo,this),M.instance.off(k.CHANGE_GOLD,this.setGold,this),G.instance.off(I.instance.eventTransform.disConnect,this.disConnect,this),G.instance.off(I.instance.protocolHall.login,this.onConnect,this)},r.onDestroy=function(){t.prototype.onDestroy.call(this),M.instance.isChangeGold=!0},r.updateView=function(t,e){switch(t){case v.HD_Bet:this.startRun(e)}},r.initGame=function(){this.updateRecord(),this.onEvent_updateBaseScore(),this._curLightPos=U.instance.recordList&&U.instance.recordList.length>0?U.instance.recordList[U.instance.recordList.length-1]:0,this.Sprite_light.position=g(w[this._curLightPos].x,w[this._curLightPos].y),this.setGold(),this.blinkLast(),V.instance.playBgMusic(C.bg,d.getBundle(T.GameMap[q.slotFruit.gameType]),!0)},r.onEvent_updateBetInfo=function(t){var e=this.Node_betInfo.children;if(t){var i=U.instance.betList[t],n=i<10?"0"+i:""+i;e[t].getComponent(l).string=n}else for(var s=0;s<8;s++){var o=U.instance.betList[s],r=o<10?"0"+o:""+o;e[s].getComponent(l).string=r}this.Label_totalBet.string=z.numberFormat(U.instance.totalBet/T.Constant.moneyRatio,2)},r.onEvent_updateBaseScore=function(){this.Label_baseScore.string=z.numberFormat(U.instance.baseScore/T.Constant.moneyRatio,2),this.Label_totalBet.string=z.numberFormat(U.instance.totalBet/T.Constant.moneyRatio,2)},r.updateRecord=function(){if(U.instance.recordList)for(var t=0;t<U.instance.recordList.length;t++){var e=this.Node_record.children[t];e||(e=m(this.Node_itemTemp),this.Node_record.addChild(e)),e.active=!0;var i=e.getChildByName("Sprite_icon");_.stopAllByTarget(i),_.stopAllByTarget(i.getComponent(f));var n=U.instance.recordList[t],s=U.instance.posSymbol[n];i.getComponent(y).spriteFrame=K.instance.symbol[s],i.getComponent(f).opacity=255}},r.addRecord=function(t){if(U.instance.recordList){U.instance.recordList.length>N-1&&(U.instance.recordList.shift(),this.Node_record.children.shift().removeFromParent());var e=this.Node_record.children[U.instance.recordList.length];e||((e=m(this.Node_itemTemp)).name=U.instance.betResult.gameNo,this.Node_record.addChild(e)),e.active=!0;var i=e.getChildByName("Sprite_icon"),n=U.instance.posSymbol[t];i.getComponent(y).spriteFrame=K.instance.symbol[n],U.instance.recordList.push(t)}},r.blinkNew=function(t){var e=this;void 0===t&&(t=1),b(this.NodeLight).stop().delay(t).call((function(){for(var t=0;t<e.NodeLight.children.length;t++)_.stopAllByTarget(e.NodeLight.children[t].getComponent(f)),e.NodeLight.children[t].getComponent(f).opacity=255,b(e.NodeLight.children[t].getComponent(f)).blink(1,1).repeatForever().start()})).call((function(){for(var t=0;t<U.instance.betResult.rewardPos.length;t++)e.addRecord(U.instance.betResult.rewardPos[t]);for(var n,s=i(e.Node_record.children);!(n=s()).done;){var o=n.value;if(o.name==U.instance.betResult.gameNo){var r=o.getChildByName("Sprite_icon");_.stopAllByTarget(r.getComponent(f)),b(r.getComponent(f)).blink(1,1).repeatForever().start()}}})).start()},r.stopBlink=function(){for(var t=0;t<this.Node_record.children.length;t++){var e=this.Node_record.children[t].getChildByName("Sprite_icon");_.stopAllByTarget(e.getComponent(f)),_.stopAllByTarget(e),e.getComponent(f).opacity=255}this.NodeLight.destroyAllChildren(),this.Sprite_light.active=!0,_.stopAllByTarget(this.Sprite_light),_.stopAllByTarget(this.Sprite_light.getComponent(f)),this.Sprite_light.getComponent(f).opacity=255},r.blinkLast=function(){var t=this;this.scheduleOnce((function(){t.Sprite_light.active=!0,_.stopAllByTarget(t.Sprite_light),_.stopAllByTarget(t.Sprite_light.getComponent(f)),t.Sprite_light.getComponent(f).opacity=255,b(t.Sprite_light.getComponent(f)).blink(1.5,1).repeatForever().start();var e=t.Node_record.children[t.Node_record.children.length-1].getChildByName("Sprite_icon");_.stopAllByTarget(e),_.stopAllByTarget(e.getComponent(f)),e.getComponent(f).opacity=255,b(e.getComponent(f)).blink(1.5,1).repeatForever().start()}),.1)},r.reset=function(){for(var t=0;t<this.Node_record.children.length-1;t++){var e=this.Node_record.children[t].getChildByName("Sprite_icon");_.stopAllByTarget(e),_.stopAllByTarget(e.getComponent(f)),e.getComponent(f).opacity=255}this.NodeLight.destroyAllChildren(),this.Node_winTip.active=!1,this.Sprite_light.active=!0,_.stopAllByTarget(this.Sprite_light.getComponent(f)),_.stopAllByTarget(this.Sprite_light),this.Sprite_light.getComponent(f).opacity=255,U.instance.isAutoRun||b(this.Sprite_light.getComponent(f)).blink(1.5,1).repeatForever().start(),this.Sprite_light_bonus.active=!1},r.doReqBet=function(){this.reset(),H.instance.reqBet()},r.startRun=function(t){this.updateGold(!0),this.Node_centerEffect.setAnimation(0,"idle",!0),this.Node_bonusTip.setCompleteListener(null),this.Node_bonusTip.node.active=!1,U.instance.isRuning=!0,U.instance.isAutoRun||this.reset(),this.stopBlink(),_.stopAllByTarget(this.Node_winTip),_.stopAllByTarget(this.Node_winTip.getComponent(f)),this.Node_winTip.active=!1,this.Label_IssueNo.string="#"+t.gameNo,this.doLightRun(this._curLightPos,t.rewardPos[0],S.nomal),gts.Debug.Log("==self._curLightPos=="+this._curLightPos),gts.Debug.Log("==self.rewardPos=="+t.rewardPos[0])},r.setGold=function(){this.Label_gold.string=z.numberFormat(parseInt(M.instance.getUserDataForKey(E.GOLD))/T.Constant.moneyRatio,2)},r.updateGold=function(t){void 0===t&&(t=!1),t?(M.instance.setUserDataForKey(E.GOLD,U.instance.userGold-U.instance.totalBet),M.instance.isChangeGold=!0,M.instance.emit(k.CHANGE_GOLD),M.instance.isChangeGold=!1):(M.instance.isChangeGold=!0,x.instance.sendOnlineData(I.instance.protocolHall.getWallet,{}))},r.endRun=function(){var t=this,e=!1,i=P[U.instance.betResult.rewardType];if(i>P.RewardNormal&&i<=P.RewardBar){switch(i){case P.RewardChaoJiDaManGuan:this.Node_centerEffect.setAnimation(0,"lv3",!0);break;case P.RewardKaiHuoChe:this.Node_centerEffect.setAnimation(0,"lv2",!0);break;default:this.Node_centerEffect.setAnimation(0,"lv1",!0)}e=!0,this.Node_bonusTip.node.active=!0,i=i>9?i%10+1:i,this.Node_bonusTip.setAnimation(0,"win"+i,!1);var n=d.getBundle(T.GameMap[T.GameType.slotFruit]).get("language/"+O.getLangType()+"/win"+i+"/texture",p);this.Node_bonusTip.setSlotTexture("excellent",n),this.Node_bonusTip.setCompleteListener(null),this.Node_bonusTip.setCompleteListener((function(){t.Node_bonusTip.node.active=!1,U.instance.isAutoRun&&t.doReqBet()}));var s=this.Node_bonusTip.node.getChildByName("Label_win");s.getComponent(l).string="+"+z.numberFormat(U.instance.betResult.rewardMoney/T.Constant.moneyRatio,2),s.scale=g(.1,.1,1),s.getComponent(f).opacity=100,b(s).stop().to(.5,{scale:g(1,1,1)}).start(),b(s.getComponent(f)).stop().to(.5,{opacity:255}).start()}else{if(U.instance.betResult.rewardMoney>0)this.Node_winTip.getChildByName("Label_win").getComponent(l).string="+"+z.numberFormat(U.instance.betResult.rewardMoney/T.Constant.moneyRatio,2),this.Node_winTip.setPosition(this.Node_winTip.position.x,0),this.Node_winTip.getComponent(f).opacity=100,b(this.Node_winTip).stop().to(.5,{position:g(this.Node_winTip.position.x,135)}).delay(3).start(),b(this.Node_winTip.getComponent(f)).stop().to(.5,{opacity:255}).delay(3).to(.25,{opacity:0}).start(),this.Node_winTip.active=!0}this.updateGold(!1);var o=U.instance.isAutoRun?1:.5;this.blinkNew(o-.25),this.scheduleOnce((function(){U.instance.isRuning=!1,U.instance.isAutoRun?e||t.doReqBet():t.Button_run.interactable=!0}),o)},r.doLightRun=function(t,e,i){switch(this.dtTimes=0,this.runType=i||this.runType,this.runType){case S.nomal:this.endPos=e;var n=e-t;this.totalTimes=48+(n>0?n:n+24),this.curDelayTimes=B,this.schedule(this.updatelight_nomal),this.rewardIndex=0;break;case S.foward:case S.reverse:this.endPos=e;var s=i==S.foward?e-t:t-e;this.totalTimes=24+(s>0?s:s+24),this.curDelayTimes=R,this.rewardIndex++,this.schedule(this.updatelight_reverse);break;case S.zhsh:this.endPos=e,this.totalTimes=U.instance.betResult.rewardPos.length-1,this.curDelayTimes=.25,gts.Debug.Log("==self.totalTimes=zhsh="+this.totalTimes),this.rewardIndex++,this.schedule(this.updatelight_zhsh);break;case S.dmg:this.endPos=e,this.totalTimes=U.instance.betResult.rewardPos.length-1,this.curDelayTimes=R,this.rewardIndex++,this.schedule(this.updatelight_dmg);break;case S.train:this.endPos=e;var o=e-t;this.totalTimes=48+(o>0?o:o+24),this.curDelayTimes=B,this.schedule(this.updatelight_train)}},r.updatelight_nomal=function(t){var e=this;if(this.dtTimes+=t,this.dtTimes>this.curDelayTimes){if(this.dtTimes-=this.curDelayTimes,this.Sprite_light_bonus.active=!this.Sprite_light_bonus.active,this.totalTimes>24&&this.curDelayTimes>R){var i=this.curDelayTimes-D;this.curDelayTimes=i<R?R:i}else this.totalTimes<A?this.curDelayTimes+=F:this.curDelayTimes=R;if(this._curLightPos=++this._curLightPos%24,this.Sprite_light.position=g(w[this._curLightPos].x,w[this._curLightPos].y),this.totalTimes--,this.totalTimes<=0&&this._curLightPos==this.endPos){this.unschedule(this.updatelight_nomal),K.instance.playOneShot(C.run_end);var n=m(this.Sprite_light);this.NodeLight.addChild(n),this.Sprite_light.active=!1,gts.Debug.Log("==self._curLightPos=="+this._curLightPos);var s=U.instance.betResult.rewardPos[this.rewardIndex+1];s>=0?(this.Sprite_light_bonus.active=!0,this.scheduleOnce((function(){switch(e.Sprite_light.active=!0,_.stopAllByTarget(n.getComponent(f)),_.stopAllByTarget(n),n.getComponent(f).opacity=255,P[U.instance.betResult.rewardType]){case P.RewardZhongHengSiHai:s=U.instance.betResult.rewardPos[U.instance.betResult.rewardPos.length-1],e.doLightRun(e._curLightPos,s,S.zhsh);break;case P.RewardChaoJiDaManGuan:s=U.instance.betResult.rewardPos[U.instance.betResult.rewardPos.length-1],e.doLightRun(e._curLightPos,s,S.dmg);break;case P.RewardKaiHuoChe:s=U.instance.betResult.rewardPos[1],e.doLightRun(e._curLightPos,s,S.train);break;default:e.doLightRun(e._curLightPos,s,S.foward)}}),.5)):(this.Sprite_light_bonus.active=!1,this.endRun())}else K.instance.playOneShot(C.run_0)}},r.updatelight_reverse=function(t){var e=this;if(this.dtTimes+=t,this.dtTimes>this.curDelayTimes)if(this.dtTimes-=this.curDelayTimes,this._curLightPos=this.runType==S.foward?++this._curLightPos%24:(24+--this._curLightPos)%24,this.Sprite_light.position=g(w[this._curLightPos].x,w[this._curLightPos].y),this.totalTimes--,this.totalTimes<=0&&this._curLightPos==this.endPos){this.unschedule(this.updatelight_reverse),K.instance.playOneShot(C.run_end);var i=m(this.Sprite_light);this.NodeLight.addChild(i),this.Sprite_light.active=!1;var n=U.instance.betResult.rewardPos[this.rewardIndex+1];n>=0?this.scheduleOnce((function(){e.Sprite_light.active=!0,e.doLightRun(e._curLightPos,n,e.rewardIndex%2==0?S.foward:S.reverse)}),.5):this.endRun()}else S.foward?K.instance.playOneShot(C.run_0):K.instance.playOneShot(C.run_1)},r.updatelight_zhsh=function(t){if(this.dtTimes+=t,this.dtTimes>this.curDelayTimes){if(this.dtTimes-=this.curDelayTimes,this.rewardIndex>1){var e=m(this.Sprite_light);_.stopAllByTarget(e),_.stopAllByTarget(e.getComponent(f)),e.getComponent(f).opacity=255,this.NodeLight.addChild(e)}if(this._curLightPos=++this._curLightPos%24,this.Sprite_light.position=g(w[this._curLightPos].x,w[this._curLightPos].y),this.rewardIndex++,this.totalTimes--,this.totalTimes<=0&&this._curLightPos==this.endPos){this.unschedule(this.updatelight_zhsh),K.instance.playOneShot(C.run_end);var i=m(this.Sprite_light);_.stopAllByTarget(i),_.stopAllByTarget(i.getComponent(f)),i.getComponent(f).opacity=255,this.NodeLight.addChild(i),_.stopAllByTarget(this.Sprite_light),_.stopAllByTarget(this.Sprite_light.getComponent(f)),this.Sprite_light.getComponent(f).opacity=255,this.Sprite_light.active=!1,this.endRun()}else{var n="run_"+(this.rewardIndex%4+1);K.instance.playOneShot(C[n])}}},r.updatelight_dmg=function(t){if(this.dtTimes+=t,this.dtTimes>this.curDelayTimes){this.dtTimes-=this.curDelayTimes,this._curLightPos=++this._curLightPos%24,this.Sprite_light.position=g(w[this._curLightPos].x,w[this._curLightPos].y);var e=m(this.Sprite_light);if(this.NodeLight.addChild(e),this.rewardIndex++,this.totalTimes--,this.totalTimes<=0&&this._curLightPos==this.endPos)this.unschedule(this.updatelight_dmg),K.instance.playOneShot(C.run_end),this.Sprite_light.active=!1,this.endRun();else{var i="run_"+(this.rewardIndex%4+1);K.instance.playSound(C[i])}}},r.updatelight_train=function(t){if(this.dtTimes+=t,this.dtTimes>this.curDelayTimes){if(this.dtTimes-=this.curDelayTimes,this.totalTimes>24&&this.curDelayTimes>R){var e=this.curDelayTimes-D;this.curDelayTimes=e<R?R:e}else this.totalTimes<A+1?this.curDelayTimes+=F:this.curDelayTimes=R;if(this._curLightPos=++this._curLightPos%24,this.Sprite_light.position=g(w[this._curLightPos].x,w[this._curLightPos].y),this._curLightPos!=U.instance.betResult.rewardPos[0]&&this.NodeLight.children.length<U.instance.betResult.rewardPos.length-1){var i=m(this.Sprite_light);i.getComponent(f).opacity=255/(U.instance.betResult.rewardPos.length-1),this.NodeLight.addChild(i);for(var n=1;n<this.NodeLight.children.length;n++)this.NodeLight.children[n].getComponent(f).opacity<255&&(this.NodeLight.children[n].getComponent(f).opacity+=255/(U.instance.betResult.rewardPos.length-1))}for(var s=1;s<this.NodeLight.children.length;s++){var o=(this._curLightPos-s+24)%24;this.NodeLight.children[s].position=g(w[o].x,w[o].y)}if(this.totalTimes--,this.totalTimes<=0&&this._curLightPos==this.endPos){this.unschedule(this.updatelight_train),K.instance.playSound(C.run_list);var r=m(this.Sprite_light);this.NodeLight.addChild(r),this.Sprite_light.active=!1,this.endRun()}else{var a="run_"+(this.rewardIndex%4+1);K.instance.playSound(C[a])}}},n}(T.BaseView),ct=n(lt.prototype,"Node_record",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=n(lt.prototype,"Node_itemTemp",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=n(lt.prototype,"NodeLight",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=n(lt.prototype,"Sprite_light",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=n(lt.prototype,"Label_totalBet",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=n(lt.prototype,"Label_baseScore",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=n(lt.prototype,"Label_IssueNo",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=n(lt.prototype,"Label_gold",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=n(lt.prototype,"Node_betInfo",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=n(lt.prototype,"Sprite_light_bonus",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tt=n(lt.prototype,"Node_winTip",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lt=n(lt.prototype,"Button_run",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=n(lt.prototype,"Node_bonusTip",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=n(lt.prototype,"Node_centerEffect",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=lt))||ht)||ht));r._RF.pop()}}}));

System.register("chunks:///_virtual/FruitSelfRecord.ts",["./rollupPluginModLoBabelHelpers.js","cc","./I18n.ts","./EventManager.ts","./Common.ts","./Fruit77Def.ts","./GameDef.ts","./Fruit77Ctrl.ts","./Fruit77Utils.ts"],(function(e){var t,n,r,o,i,a,l,c,u,s,d,f,m,g,p,b,h,_,v,y,C,N,S,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,c=e.Node,u=e.Label,s=e.ScrollView,d=e.find,f=e.instantiate,m=e.Sprite,g=e.Component},function(e){p=e.default},function(e){b=e.default},function(e){h=e.Common},function(e){_=e.eProto,v=e.mapSymbol,y=e.mapBetIndex,C=e.symbolRate},function(e){N=e.GameDef},function(e){S=e.Fruit77Ctrl},function(e){I=e.Fruit77Utils}],execute:function(){var w,B,R,L,F,D,V,x,z,A,P,O,j,G,M,T;a._RF.push({},"e1bbcePcwBAj6tjqCyQTAKV","FruitSelfRecord",void 0);var k=l.ccclass,H=l.property,q=l.menu;e("default",(w=k("FruitSelfRecord"),B=q("game/Fruit77/FruitSelfRecord"),R=H(c),L=H(c),F=H(u),D=H(s),V=H(s),x=H(c),w(z=B((P=t((A=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"Node_rate",P,o(t)),r(t,"Node_recordInfo",O,o(t)),r(t,"Label_trang",j,o(t)),r(t,"ScrollView_myBet",G,o(t)),r(t,"ScrollView_result",M,o(t)),r(t,"item_0",T,o(t)),t.curIndex=1,t.totalNum=0,t}n(t,e);var a=t.prototype;return a.onLoad=function(){S.instance.reqSelfRecord()},a.start=function(){},a.onEnable=function(){b.instance.on(_.HD_GetLastRecord,this.onRecvData,this)},a.onDisable=function(){b.instance.off(_.HD_GetLastRecord)},a.onBtnClick=function(e,t){var n=this.curIndex;switch(e.target.name){case"Button_right":if(this.curIndex==this.totalNum)return;n++;break;case"Button_left":if(0==this.curIndex)return;n--}S.instance.reqSelfRecord(n)},a.onRecvData=function(e){if(gts.Debug.Log("==onRecvData=="+JSON.stringify(e)),e.Code&&0!=e.Code)h.showTip(p.errTip(e.Code));else{var t=e.Data;if(0!=t.totalNum)this.totalNum=t.totalNum,this.curIndex=t.curIndex,this.Label_trang.string=p.t("page")+" "+t.curIndex+"/"+t.totalNum,d("bg/Button_right",this.node).active=this.curIndex<this.totalNum,d("bg/Button_left",this.node).active=this.curIndex>1,this.updateRecordInfo(t.record),this.updateRate(t.openArr)}},a.updateRate=function(e){if(e){for(var t,n={bar:0,leftLucky:0,bigOrange:0,bigBell:0,bigLemon:0,apple:0,bigWaterMelon:0,bigStar:0,bigSeven:0},r=e.length,o=i(e);!(t=o()).done;){var a=t.value;n[v[a]]++}for(var l=0,c=Object.entries(n);l<c.length;l++){var s=c[l],d=s[0],f=s[1],m=Math.floor(f/r*1e4)/100;this.Node_rate.getChildByName(d).getComponent(u).string=m+"%"}}},a.updateRecordInfo=function(e){var t=d("Node_betInfo/Label_phong",this.Node_recordInfo),n=d("Node_betInfo/Label_time",this.Node_recordInfo),r=d("Node_betInfo/Label_bet",this.Node_recordInfo),o=d("Node_betInfo/Label_win",this.Node_recordInfo);t.getComponent(u).string="#"+e.GameNo,n.getComponent(u).string=e.BetTime,r.getComponent(u).string=""+h.numberFormat(e.BetAmount/N.Constant.moneyRatio,2),o.getComponent(u).string=""+h.numberFormat(e.PrintMoney/N.Constant.moneyRatio,2);var i=JSON.parse(e.BetDetails),a=JSON.parse(e.PrizeNum);d("Node_label",this.ScrollView_myBet.node.parent).removeAllChildren(),this.ScrollView_myBet.content.removeAllChildren();for(var l=0;l<8;l++){var c=i[l];if(c>0){var s=f(this.item_0);this.ScrollView_myBet.content.addChild(s),s.active=!0;var g=y[l];s.getChildByName("Sprite_icon").getComponent(m).spriteFrame=I.instance.symbol[g],s.getChildByName("Label_score").getComponent(u).string="X"+h.numberFormat(c/N.Constant.moneyRatio,2)}}if(this.ScrollView_result.content.removeAllChildren(),"object"==typeof a)for(var p=0;p<a.RewardPos.length;p++){var b=f(this.item_0);this.ScrollView_result.content.addChild(b),b.active=!0;var _=a.RewardPos[p],S=v[_];b.getChildByName("Sprite_icon").getComponent(m).spriteFrame=I.instance.symbol[S];var w=C[_],B=b.getChildByName("Label_score");B.getComponent(u).string="X"+w,B.active=w>0}else for(var R=0;R<a.length;R++){var L=f(this.item_0);this.ScrollView_result.content.addChild(L),L.active=!0;var F=a[R],D=v[F];L.getChildByName("Sprite_icon").getComponent(m).spriteFrame=I.instance.symbol[D];var V=C[F],x=L.getChildByName("Label_score");x.getComponent(u).string="X"+V,x.active=V>0}},t}(g)).prototype,"Node_rate",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(A.prototype,"Node_recordInfo",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(A.prototype,"Label_trang",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(A.prototype,"ScrollView_myBet",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(A.prototype,"ScrollView_result",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(A.prototype,"item_0",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=A))||z)||z));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/Fruit77', 'chunks:///_virtual/Fruit77'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});